<link
  href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css"
  rel="stylesheet"
/>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
  integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
  crossorigin="anonymous"
/>
<div class="sidenav">
  <button class="table-btn" (click)="navigateWithData()"> < Back
  </button>
</div>
<p class="greeting">Welcome Domain Mentor - {{name}}</p>
<p class="courseCodeAndName">Domain:
  <span *ngIf="domain_id === 1">PROGRAMMING</span>
  <span *ngIf="domain_id === 2">NETWORKS & OPERATING SYSTEMS</span>
  <span *ngIf="domain_id === 3">ALGORITHMS</span>
</p>
<p class="courseCodeAndName">Course Code : {{ displayCourseData.course_code }} Course Name : {{ displayCourseData.course_name }}</p>
<div class="container">
  <div class="table-wrapper">
    <table @fade>
      <thead>
        <tr>
          <th>Course Code</th>
          <th>Course Name</th>
          <th>Topic</th>
          <th>status</th>
          <th>link</th>
          <th>Approval</th>
          <th>comment</th>
        </tr>
      </thead>
      <tbody @fade>
        <tr *ngFor="let item of data; let i = index">
          <td>{{ item.course_code }}</td>
          <td>{{ item.course_name }}</td>
          <td>{{ item.topic }}</td>
          <td>
            <div
              class="box"
              [style.background-color]="getBoxColor(item.status_code)"
            ></div>
          </td>
          <td>
            <a *ngIf="item.url != ''"  href="{{ item.url }}" target="_blank" style="text-decoration: none">View</a>
            <p *ngIf="item.url == ''">View</p>
          </td>
          <td>
            <ng-container *ngIf="(item.status_code == 1 || item.status_code == 2) && editedIndex != i">
              <button
                (click)="approveupdate(item.topic_id, item.uid)"
                class="statusactivated"
              >
                Approve
              </button>
              <button
                (click)="disapproveupdate(i)"
                class="statusactivated"
              >
                Disapprove
              </button>
            </ng-container>
            <div *ngIf="editedIndex == i">
              <input
                type="text"
                [(ngModel)]="comment"
                placeholder="Enter comment"
              />
              <button
                (click)="commentupdate(comment, item.topic_id, item.uid)"
                class="statusactivated"
              >
                Submit
              </button>
              <button
                (click)="commentupdate(comment, 0, item.uid)"
                class="statusactivated"
              >
                cancel
              </button>
            </div>
          </td>
          <td>{{ item.comment }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<div class="design"></div>
